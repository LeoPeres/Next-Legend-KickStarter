import { Meta } from "@storybook/blocks";

<Meta title="Docs/Visual Testing" />

# Visual Regression Testing with Chromatic

This project uses [Chromatic](https://www.chromatic.com/) for visual regression testing. Chromatic captures screenshots of your Storybook stories and compares them against previous versions to detect visual changes.

## How It Works

1. When you push changes to GitHub or create a pull request, a GitHub Actions workflow automatically runs Chromatic.
2. Chromatic builds your Storybook and captures screenshots of all your stories.
3. It compares these screenshots against the baseline (previous version) to detect visual changes.
4. If changes are detected, you can review and approve or reject them in the Chromatic UI.

## Setting Up Chromatic

To set up Chromatic for your own development:

1. Sign up for a Chromatic account at [chromatic.com](https://www.chromatic.com/).
2. Link your GitHub repository to Chromatic.
3. Get your project token from Chromatic.
4. Add the token as a secret in your GitHub repository settings:
   - Go to your repository on GitHub
   - Click on "Settings" > "Secrets" > "New repository secret"
   - Name: `CHROMATIC_PROJECT_TOKEN`
   - Value: Your Chromatic project token

## Running Chromatic Locally

You can run Chromatic locally to test your changes before pushing:

```bash
npm run chromatic
```

This will build your Storybook and upload it to Chromatic for testing.

## Reviewing Changes

When Chromatic detects visual changes:

1. You'll receive a notification with a link to review the changes.
2. In the Chromatic UI, you can see before/after comparisons of each story.
3. You can approve or reject each change.
4. Approved changes become the new baseline for future comparisons.

## Best Practices

- Run Chromatic locally before pushing to catch visual regressions early.
- Review all visual changes carefully before approving.
- Use Chromatic's UI to document why you're approving changes.
- Consider adding [component-specific tests](https://storybook.js.org/docs/writing-tests/interaction-testing) for critical UI components.

## Resources

- [Chromatic Documentation](https://www.chromatic.com/docs/)
- [Storybook Testing Documentation](https://storybook.js.org/docs/writing-tests/introduction)
- [Visual Testing Handbook](https://storybook.js.org/tutorials/visual-testing-handbook/)
